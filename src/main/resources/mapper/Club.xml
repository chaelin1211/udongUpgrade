<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="Club">
	<select id="getClubArea" resultType="Map" parameterType="Map">
		SELECT CLUB.*, MEMBER.NICKNAME, NVL(0, CLUB_MEMBER.MEMBER_COUNT) AS MEMBER_COUNT
		FROM CLUB
		JOIN MEMBER
		ON CLUB.USER_ID = MEMBER.USER_ID
		LEFT JOIN (SELECT COUNT(*) AS MEMBER_COUNT, CLUB_NUM FROM CLUB_MEMBER GROUP BY CLUB_NUM) AS CLUB_MEMBER
		ON CLUB.CLUB_NUM = CLUB_MEMBER.CLUB_NUM
		WHERE CLUB.AREA_NUM = #{AREA_NUM};
	</select>

    <select id="getRankingList" resultType="Map" parameterType="Map">
		SELECT CLUB.*, MEMBER.NICKNAME, NVL(0, CLUB_MEMBER.MEMBER_COUNT) AS MEMBER_COUNT
		FROM CLUB
		JOIN MEMBER
		ON CLUB.USER_ID = MEMBER.USER_ID
		LEFT JOIN (SELECT COUNT(*) AS MEMBER_COUNT, CLUB_NUM FROM CLUB_MEMBER GROUP BY CLUB_NUM) AS CLUB_MEMBER
		ON CLUB.CLUB_NUM = CLUB_MEMBER.CLUB_NUM
        ORDER BY MEMBER_COUNT DESC, TIME DESC;
    </select>

    <select id="getNewlyList" resultType="Map" parameterType="Map">
		SELECT CLUB.*, MEMBER.NICKNAME, NVL(0, CLUB_MEMBER.MEMBER_COUNT) AS MEMBER_COUNT
		FROM CLUB
		JOIN MEMBER
		ON CLUB.USER_ID = MEMBER.USER_ID
		LEFT JOIN (SELECT COUNT(*) AS MEMBER_COUNT, CLUB_NUM FROM CLUB_MEMBER GROUP BY CLUB_NUM) AS CLUB_MEMBER
		ON CLUB.CLUB_NUM = CLUB_MEMBER.CLUB_NUM
        ORDER BY TIME DESC;
    </select>

	<select id="getClubInterest" resultType="Map" parameterType="Map">
		SELECT CLUB.*, MEMBER.NICKNAME, NVL(0, CLUB_MEMBER.MEMBER_COUNT) AS MEMBER_COUNT
		FROM CLUB
		JOIN MEMBER
		ON CLUB.USER_ID = MEMBER.USER_ID
		LEFT JOIN (SELECT COUNT(*) AS MEMBER_COUNT, CLUB_NUM FROM CLUB_MEMBER GROUP BY CLUB_NUM) AS CLUB_MEMBER
		ON CLUB.CLUB_NUM = CLUB_MEMBER.CLUB_NUM
		WHERE INTEREST_NUM = #{INTEREST_NUM};
	</select>
<!-- 
	<insert id="insert" parameterType="Map">
	</insert>

	<update id="update" parameterType="Map">
	</update>

	<delete id="delete" parameterType="Map">
	</delete> -->
</mapper>